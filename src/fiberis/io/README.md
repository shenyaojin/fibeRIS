# `fiberis.io`

The `fiberis.io` package is the data ingestion engine for the `fibeRIS` toolkit. Its primary purpose is to read data from various proprietary or raw formats and convert them into a standardized structure that can be used by the `fiberis.analyzer` modules.

## Design Philosophy

The core idea is to decouple raw data reading from data analysis. Each reader in this package is responsible for understanding a specific file format and extracting the essential information (e.g., data values, time axes, depth axes, start times).

The typical workflow is:

1.  **Read Raw Data**: Use a specific reader from `fiberis.io` to load data from its original source file (e.g., a vendor-specific `.npz`, a `.csv`, or a `.h5` file). The reader populates its internal attributes (`data`, `taxis`, `daxis`, etc.).
2.  **Instantiate Analyzer Object**: Create an instance of the appropriate analyzer class from `fiberis.analyzer` (e.g., `Data1DGauge`, `DSS2D`).
3.  **Transfer Data**: Copy the data and metadata from the reader object to the analyzer object.
4.  **Save to Standard Format**: Use the analyzer object's `savez` method to write the data to a standardized `.npz` file. This file can then be quickly and easily loaded in future sessions without needing the original raw file.

## Core Component

### `core.py`: The `DataIO` Abstract Base Class

All readers in this package inherit from the `DataIO` abstract base class. It defines a common interface that includes:

-   An `__init__` method that sets up placeholder attributes (`data`, `taxis`, `daxis`, `start_time`) and a logging system.
-   Abstract `read` and `write` methods that must be implemented by each specific reader.
-   Setter methods (`set_data`, `set_taxis`, etc.) for manual data manipulation.

## Available Readers

This package contains readers for various data sources:

-   **`reader_mariner_gauge1d.py` (`MarinerGauge1D`)**: Reads 1D gauge data that has been pre-packed into `.npz` files. It correctly calculates a relative time axis in seconds from an absolute datetime axis.
-   **`reader_mariner_pp1d.py` (`MarinerPP1D`)**: Reads 1D pumping curve data from pre-packed `.npz` files.
-   **`reader_mariner_das2d.py` (`MarinerDAS2D`)**: Reads 2D DAS (Distributed Acoustic Sensing) data from pre-packed `.npz` files, extracting the data matrix, time axis, depth axis, and start time.
-   **`reader_mariner_dssh5.py` (`MarinerDSS2D`)**: Reads 2D DSS (Distributed Strain Sensing) data from single Mariner `.h5` files.
-   **`reader_mariner_fiberdata_production_dat2d.py` (`MarinerDSSdat2D`)**: Reads 2D DSS data from a set of `.dat` files (`_depth.dat`, `_date.dat`, `_data.dat`). **Note:** This format has slow I/O performance; `MarinerDSS2D` is recommended.
-   **`reader_mariner_3d.py` (`Mariner3D`)**: Reads 3D well geometry data (EW, NS, TVD) from `.npz` files.
-   **`reader_mariner_pressureg1.py` (`MarinerPressureG1`)**: Reads 1D pressure gauge data directly from a specific two-column CSV format (`datetime`, `pressure_g1`).
-   **`reader_MOOSEcsv_pp1d.py` (`MOOSEcsv_pp1d`)**: Reads 1D time-series data from CSV files generated by MOOSE post-processors. It can list available variables and read a specific one.
-   **`reader_moose_ps.py` (`MOOSEPointSamplerReader`)**: Reads and parses output from a MOOSE PointSampler post-processor, which is typically a single CSV file with a time column and one or more variable columns.
-   **`reader_moose_vpp.py` (`MOOSEVectorPostProcessorReader`)**: Reads and assembles a time-series of spatial data from MOOSE VectorPostProcessor output, which consists of multiple CSV files (one for each time step).
-   **`reader_hfts2_h5.py` (`HFTS2DAS2D`)**: A reader for HFTS-2 (Hydraulic Fracturing Test Site 2) DAS data from `.h5` files.
-   **`reader_mariner_rfs.py` (`Mariner2DRFS2D`)**: A placeholder for reading 2D DSS-RFS (Distributed Strain Sensing - Raman Frequency Shift) data. **Note:** This is outdated and `reader_mariner_dssh5.py` should be used instead.
